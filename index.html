<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Slayer KC & Casket Calculator</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #2e2e2e;
      color: #fff;
      padding: 30px;
      max-width: 800px;
      margin: auto;
    }

    h2 {
      text-align: center;
      margin-bottom: 30px;
    }

    label {
      margin-top: 20px;
      display: block;
      font-weight: 500;
    }

    select, input {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      margin-bottom: 10px;
      border-radius: 6px;
      border: 1px solid #555;
      background-color: #3c3c3c;
      color: #fff;
      font-size: 14px;
    }

    .time-inputs {
      display: flex;
      gap: 15px;
    }

    .time-inputs input {
      flex: 1;
    }

    button {
      margin-top: 25px;
      padding: 12px;
      width: 100%;
      background-color: #5c5c5c;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    button:hover {
      background-color: #777;
    }

    .output {
      margin-top: 30px;
      background-color: #1f1f1f;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #444;
      white-space: pre-wrap;
      font-size: 14px;
    }
  </style>
</head>
<body>

  <h2>Slayer KC & Casket Calculator</h2>

  <label>Weapon:
    <select id="weapon">
      <option value="1">Kynosian Bow (1s)</option>
      <option value="0.8">Kynosian Bow (E3) (0.8s)</option>
    </select>
  </label>

  <label>Cape:
    <select id="cape">
      <option value="none">None</option>
      <option value="cognium">Cognium Wing</option>
      <option value="slayer">Slayer Cape</option>
    </select>
  </label>

  <label>Ring:
    <select id="ring">
      <option value="none">None</option>
      <option value="cognium">Cognium Ring</option>
      <option value="speed">Ring of Speed</option>
      <option value="berserker">Eternal Berserker Ring</option>
      <option value="soul">Ring of Soul</option>
      <option value="secret">Ring of Secret</option>
    </select>
  </label>

  <label>Blessing:
    <select id="blessing">
      <option value=0>None</option>
      <option value=80>Death Princess Rune (80%)</option>
      <option value=85>Death Princess Rune (E) (85%)</option>
    </select>
  </label>

  <label>Basecamp Level:
    <select id="basecamp">
      <option value=59>Basecamp 1 - 59</option>
      <option value=60>Basecamp 60 - 65</option>
      <option value=66>Basecamp 66 - 68</option>
      <option value=69>Basecamp 69 - 75</option>
    </select>
  </label>

  <label>Fast Combat:
    <select id="fastcombat">
      <option value="true">True</option>
      <option value="false">False</option>
    </select>
  </label>

  <label>Wish Status:
    <select id="wish">
      <option value="no">No Wish</option>
      <option value="max">Max Wish</option>
    </select>
  </label>

  <label>Slayer Task:
    <select id="task">
      <option value="blade">Blade (5 mobs)</option>
      <option value="tracer">Tracer (8 mobs)</option>
      <option value="crux">Crux (18 mobs)</option>
      <option value="tide">Tide (20 mobs)</option>
      <option value="quill">Quill (32 mobs)</option>
      <option value="lumen">Lumen (48 mobs)</option>
      <option value="vain">Vain (72 mobs)</option>
      <option value="feroxi">Feroxi (80 mobs)</option>
      <option value="adamet">Adamet (96 mobs)</option>
    </select>
  </label>

  <label>Mode:
    <select id="mode">
      <option value="time">Calculate KC from Time</option>
      <option value="kc">Calculate Time from KC</option>
      <option value="caskets">Calculate Time from Casket Goal</option>
    </select>
  </label>

  <div id="timeLabel" class="time-inputs">
    <input type="number" id="hoursInput" placeholder="Hours" min="0" value="0">
    <input type="number" id="minutesInput" placeholder="Minutes" min="0" value="10">
    <input type="number" id="secondsInput" placeholder="Seconds" min="0" value="0">
  </div>

  <label id="kcLabel" style="display:none;">Enter Desired Killcoins:
    <input type="number" id="kcInput" min="1" value="250">
  </label>

  <label id="casketLabel" style="display:none;">Target Caskets:
    <input type="number" id="casketInput" min="1" value="5">
    <select id="casketType">
      <option value="slayer">Slayer Caskets</option>
      <option value="regular">Regular Caskets</option>
    </select>
  </label>

  <label>How many hits to kill one mob?
    <input type="number" id="hitsInput" min="1" value="1">
  </label>

  <button id="calculateBtn">Calculate</button>

  <div class="output" id="results"></div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const taskData = {
        blade:  { mobs: 5, kc: { no: 1, max: 3.5 } },
        tracer: { mobs: 8, kc: { no: 3, max: 10.5 } },
        crux:   { mobs: 18, kc: { no: 6, max: 21 } },
        tide:   { mobs: 20, kc: { no: 10, max: 35 } },
        quill:  { mobs: 32, kc: { no: 18, max: 63 } },
        lumen:  { mobs: 48, kc: { no: 32, max: 112 } },
        vain:   { mobs: 72, kc: { no: 54, max: 189 } },
        feroxi: { mobs: 80, kc: { no: 75, max: 262.5 } },
        adamet: { mobs: 96, kc: { no: 125, max: 437.5 } }
      };

      const updateModeInputs = () => {
        const mode = document.getElementById("mode").value;
        document.getElementById("timeLabel").style.display = mode === "time" ? "flex" : "none";
        document.getElementById("kcLabel").style.display = mode === "kc" ? "block" : "none";
        document.getElementById("casketLabel").style.display = mode === "caskets" ? "block" : "none";
      };

      document.getElementById("mode").addEventListener("change", updateModeInputs);

      document.getElementById("calculateBtn").addEventListener("click", () => {
        const weaponSpeed = parseFloat(document.getElementById("weapon").value);
        const ring = document.getElementById("ring").value;
        const cape = document.getElementById("cape").value;
        const wish = document.getElementById("wish").value;
        const task = document.getElementById("task").value;
        const hits = parseInt(document.getElementById("hitsInput").value);
        const mode = document.getElementById("mode").value;
        const basecamp = parseInt(document.getElementById("basecamp").value);
        const fastcombat = document.getElementById("fastcombat").value === "true"
        const blessing = parseInt(document.getElementById("blessing").value);

        let attackSpeed = weaponSpeed;
        if (["cognium", "speed", "berserker", "soul", "secret"].includes(ring)) attackSpeed *= 0.5;
        if (basecamp >= 60) attackSpeed *= 0.8

        let respawnTime = 1.8;
        if (fastcombat) respawnTime *= 0.5
        if (cape === "cognium") respawnTime *= 0.5;
        if (["cognium", "secret"].includes(ring)) respawnTime *= 0.5;
        if (basecamp >= 66) respawnTime *= 0.8;

        let { mobs, kc } = taskData[task];
        if (basecamp >= 69) mobs = Math.ceil(mobs * 0.8);

        let kcPerTask = wish === "max" ? kc.max : kc.no;
        if (cape === "slayer") kcPerTask *= 2;
        
        let mobKillTime = 0;
        let taskTime = 0;
        if ([80, 85].includes(blessing)) {
          mobKillTime = attackSpeed * hits + respawnTime;
          taskTime = mobs * mobKillTime;
          const successDPR = taskTime * blessing / 100;

          mobKillTime = attackSpeed * (hits + 1) + respawnTime;
          taskTime = mobs * mobKillTime;
          const failureDPR = taskTime * (100-blessing) / 100;

          taskTime = successDPR + failureDPR;
        } else {
          mobKillTime = attackSpeed * hits + respawnTime;
          taskTime = mobs * mobKillTime;
        }

        let result = "";
        if (mode === "time") {
          const hrs = +document.getElementById("hoursInput").value || 0;
          const mins = +document.getElementById("minutesInput").value || 0;
          const secs = +document.getElementById("secondsInput").value || 0;
          const totalSeconds = hrs * 3600 + mins * 60 + secs;
          const tasksCompleted = Math.floor(totalSeconds / taskTime);
          const totalKC = tasksCompleted * kcPerTask;
          const slayerCaskets = Math.floor(totalKC / 50000 * 20);
          const regularMin = Math.floor(slayerCaskets / 20);
          const regularMax = Math.floor(slayerCaskets / 15);
          result += `In ${hrs}h ${mins}m ${secs}s, you can:\n`;
          result += `- Complete ${tasksCompleted} tasks\n`;
          result += `- Earn ~${totalKC.toLocaleString()} killcoins\n`;
          result += `- Receive ~${slayerCaskets} Slayer Caskets\n`;
          result += `- Get ~${regularMin} to ${regularMax} Regular Caskets`;
        } else if (mode === "kc") {
          const goalKC = parseInt(document.getElementById("kcInput").value);
          const tasksNeeded = Math.ceil(goalKC / kcPerTask);
          const totalTime = tasksNeeded * taskTime;
          const hrs = Math.floor(totalTime / 3600);
          const mins = Math.floor((totalTime % 3600) / 60);
          const secs = Math.floor(totalTime % 60);
          result += `To earn ${goalKC} killcoins:\n`;
          result += `- You need ${tasksNeeded} tasks\n`;
          result += `- It will take approx ${hrs}h ${mins}m ${secs}s`;
        } else if (mode === "caskets") {
          const casketGoal = parseInt(document.getElementById("casketInput").value);
          const type = document.getElementById("casketType").value;
          let kcNeeded = 0;
          if (type === "slayer") kcNeeded = (casketGoal / 20) * 50000;
          else kcNeeded = (casketGoal * (15 + 20) / 2 / 20) * 50000;
          const tasksNeeded = Math.ceil(kcNeeded / kcPerTask);
          const totalTime = tasksNeeded * taskTime;
          const hrs = Math.floor(totalTime / 3600);
          const mins = Math.floor((totalTime % 3600) / 60);
          const secs = Math.floor(totalTime % 60);
          result += `To earn ${casketGoal} ${type === "slayer" ? "Slayer" : "Regular"} Caskets:\n`;
          result += `- You need ${tasksNeeded} tasks (~${kcNeeded.toLocaleString()} KC)\n`;
          result += `- It will take approx ${hrs}h ${mins}m ${secs}s`;
        }

        document.getElementById("results").innerText = result;
      });

      updateModeInputs();
    });
  </script>

</body>
</html>